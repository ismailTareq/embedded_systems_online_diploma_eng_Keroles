# LAB1
SWitch between MSP and PSP

## saving spaces for the two tasks
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/saving%20spaces%20for%20two%20tasks.png)

## After an rising edge been detected 
## set sp -> PSP
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/set%20PSP.png)

## make it unprivilege
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/unprivilege.png)

## got to taskB
see how frame pointer works
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/saving%20stack%20for%20the%20values.png)

## finishing taskB
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/finishing%20taskB.png)

## switch to privilege
we can't do it unless we called an interrupt so we can be in handler mode and privilege in order to switch
![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/changing%20to%20privilege.png)

## set SP -> MSP
 ![gitHub](https://github.com/ismailTareq/embedded_systems_online_diploma_eng_Keroles/blob/main/Mastering%20ARM%20CortexM3%204/4.session5(Stack%20Memory)/lab1/set%20to%20MSP.png)


